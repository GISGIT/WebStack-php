<!DOCTYPE html>
<html>
{include file="common/head"}
<script src="/static/vendor/colorpicker/js/colorpicker.js"></script>
<body>
<div class="x-body">
    <form action="" method="post" class="layui-form layui-form-pane">
        <div class="layui-form-item">
            <label for="name" class="layui-form-label">
                <span class="x-red">*</span>网站名称
            </label>
            <div class="layui-input-block">
                <input type="text" id="name" name="name" required="" lay-verify="required" autocomplete="off" class="layui-input" value="{$find.name}">
            </div>
        </div>
        <div class="layui-form-item">
            <label for="name" class="layui-form-label">
                标题颜色
            </label>
            <div class="layui-input-inline">
                <div class="layui-input-inline" style="width: 120px;">
                    <input type="text" name="color" value="{$find.color}" placeholder="请选择颜色" class="layui-input" id="test-form-input">
                </div>
                <div class="layui-inline" style="left: -11px;">
                    <div id="test-form" style="margin-bottom: 0 !important;"></div>
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label"> <span class="x-red">*</span>选择分类</label>
            <div class="layui-input-inline">
                <select name="cid" lay-verify="required" lay-search="">
                    {volist name="cateList" id="vo"}
                    <option value="{$vo.id}" {if condition="$vo.id eq $find.cid"}selected{/if}>{$vo.name}</option>
                    {/volist}
                </select>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">
                网站图片
            </label>
            <div class="layui-input-inline">
                <input id="imageinput" type="text" name="image" class="layui-input" value="{$find.image}">
            </div>
            <div id="imageuploader" style="display: inline-block;position: relative">
                <!--用来存放item-->
                <div id="imagePicker">选择图片</div>
            </div>
        </div>
        <div id="imageList" class="layui-form-item">
            <label class="layui-form-label">
                图片展示
            </label>
            <div class="layui-input-block">
                <div class="layui-input-block">
                    <div  class="uploader-list" style="overflow:hidden;"><div class="file-item thumbnail col-sm-2"><img id="imageListPic" style="max-width: 100px;max-height: 100px;" src="{$find.image}"></div></div>
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">
                背景图片
            </label>
            <div class="layui-input-inline">
                <input id="bgimageinput" type="text" name="bgimg" class="layui-input" value="{$find.bgimg}">
            </div>
            <div id="bgimageuploader" style="display: inline-block;position: relative">
                <!--用来存放item-->
                <div id="bgimagePicker">选择图片</div>
            </div>
        </div>
        <div id="bgimageList" class="layui-form-item">
            <label class="layui-form-label">
                背景展示
            </label>
            <div class="layui-input-block">
                <div class="layui-input-block">
                    <div  class="uploader-list" style="overflow:hidden;"><div class="file-item thumbnail col-sm-2"><img id="bgimageListPic" style="max-width: 100px;max-height: 100px;" src="{$find.bgimg}"></div></div>
                </div>
            </div>
        </div>
        <div id="index-div">
            {if condition="$countp eq '0'"}
            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label">参数标题</label>
                    <div class="layui-input-inline">
                        <input type="tel" name="ptitle[]" lay-verify="required" autocomplete="off" class="layui-input" value="首页网址">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">参数名称</label>
                    <div class="layui-input-inline">
                        <input type="tel" name="pname[]" lay-verify="required" autocomplete="off" class="layui-input" value="链接">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">链接地址</label>
                    <div class="layui-input-inline"><input type="text" name="purl[]" autocomplete="off" class="layui-input" value=""></div></div>
                <a href="javascript:;" class="layui-btn layui-btn-primary addInputReturn" style="margin-bottom: 5px;">+</a>
            </div>
            {else}
            {volist name="parameter" id="vo"}
            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label">参数标题</label>
                    <div class="layui-input-inline">
                        <input type="tel" name="ptitle[]" lay-verify="required" autocomplete="off" class="layui-input" value="{$vo.ptitle}">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">参数名称</label>
                    <div class="layui-input-inline">
                        <input type="tel" name="pname[]" lay-verify="required" autocomplete="off" class="layui-input" value="{$vo.pname}">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">链接地址</label>
                    <div class="layui-input-inline"><input type="text" name="purl[]" autocomplete="off" class="layui-input" value="{$vo.purl}"></div></div>
                {if condition="$i eq $countp"}
                <a href="javascript:;" class="layui-btn layui-btn-primary addInputReturn" style="margin-bottom: 5px;">+</a>{else}
                <a href="javascript:;" class="layui-btn layui-btn-primary delInput" style="margin-bottom: 5px;">-</a>{/if}
            </div>
            {/volist}
            {/if}
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">显示状态</label>
            <div class="layui-input-block">
                <input type="radio" name="isshow" value="1" title="显示" {if condition="$find.isshow eq '1'"}checked=""{/if}>
                <input type="radio" name="isshow" value="0" title="不显示" {if condition="$find.isshow eq '0'"}checked=""{/if}>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">首页推荐</label>
            <div class="layui-input-block">
                <input type="radio" name="isRec" value="1" title="推荐" {if condition="$find.isRec eq '1'"}checked=""{/if}>
                <input type="radio" name="isRec" value="0" title="不推荐" {if condition="$find.isRec eq '0'"}checked=""{/if}>
            </div>
        </div>
        <div class="layui-form-item">
            <label for="order" class="layui-form-label">
                关键词
            </label>
            <div class="layui-input-block">
                <input type="text" name="keywords" autocomplete="off" class="layui-input" value="{$find.keywords}">
            </div>
        </div>
        <div class="layui-form-item">
            <label for="order" class="layui-form-label">
                简介
            </label>
            <div class="layui-input-block">
                <input type="text" id="desc" name="desc" autocomplete="off" class="layui-input" value="{$find.desc}">
            </div>
        </div>
        <div class="layui-form-item layui-form-text">
            <label for="order" class="layui-form-label">
                介绍
            </label>
            <div class="layui-input-text">
                <script id="container" name="info" type="text/plain">{$find.info|raw}</script>
            </div>
        </div>
        <div class="layui-form-item">
            <label for="order" class="layui-form-label">
                排序
            </label>
            <div class="layui-input-block">
                <input type="text" id="order" name="order" autocomplete="off" class="layui-input" value="{$find.order}">
            </div>
        </div>
        <div class="layui-form-item">
            <button class="layui-btn" lay-submit="" lay-filter="add">修改</button>
        </div>
    </form>
</div>
<script type="text/javascript" src="/static/vendor/ueditor/ueditor.config.js"></script>
<script type="text/javascript" src="/static/vendor/ueditor/ueditor.all.js"></script>
<link rel="stylesheet" type="text/css" href="/static/vendor/uploader/webuploader.css" />
<script type="text/javascript" src="/static/vendor/uploader/webuploader.js"></script>
<script>
    $(function () {
        var uploader = WebUploader.create({
            auto: true,
            swf: '/static/vendor/uploader/Uploader.swf',
            server: '{:url('upload/image')}',
            pick: '#imagePicker',
            accept: {
            title: 'Images',
                extensions: 'gif,jpg,jpeg,bmp,png',
                mimeTypes: 'image/*'
        },
        fileNumLimit: 500,
            duplicate:true
    });
        uploader.on( 'uploadSuccess', function( file, response ) {
            var imgurl = response.imgurl;
            $("#imageListPic").attr("src", imgurl);
            $("#imageinput").val(imgurl);
        });
    })
</script>
<script>
    $(function () {
        var uploader = WebUploader.create({
            auto: true,
            swf: '/static/vendor/uploader/Uploader.swf',
            server: '{:url('upload/image')}',
            pick: '#bgimagePicker',
            accept: {
            title: 'Images',
                extensions: 'gif,jpg,jpeg,bmp,png',
                mimeTypes: 'image/*'
        },
        fileNumLimit: 500,
            duplicate:true
    });
        uploader.on( 'uploadSuccess', function( file, response ) {
            var imgurl = response.imgurl;
            $("#bgimageListPic").attr("src", imgurl);
            $("#bgimageinput").val(imgurl);
        });
    })
</script>
<script>
    var ue = UE.getEditor('container', {
        autoHeight: false,
        autoFloatEnabled:false,
    });
</script>
<script>
    layui.use('colorpicker', function() {
        var $ = layui.$
            ,colorpicker = layui.colorpicker;
        //表单赋值
        colorpicker.render({
            elem: '#test-form'
            , color: '{$find.color}'
            , predefine: true
            , done: function (color) {
                $('#test-form-input').val(color);
            }
        });
    })
</script>
<script>
    /**
     * 动态添加事件
     */
    $("body").on('click','.addInputReturn',function () {

        //添加减号
        var $content = "";
        $content += ' <a href="javascript:;" class="layui-btn layui-btn-primary delInput" style="margin-bottom: 5px;">';
        $content += '-';
        $content += '</a>';
        $(this).parent().append($content);
        //去除加号
        this.remove();
        var html = "";
        html += '<div class="layui-form-item">';
        html += '<div class="layui-inline">';
        html += '<label class="layui-form-label">参数标题</label>';
        html += ' <div class="layui-input-inline">';
        html += '<input type="tel" name="ptitle[]" lay-verify="required" autocomplete="off" class="layui-input" placeholder="请填写参数标题">';
        html += ' </div>';
        html += '</div>';
        html += '<div class="layui-inline">';
        html += '<label class="layui-form-label">参数名称</label>';
        html += ' <div class="layui-input-inline">';
        html += '<input type="tel" name="pname[]" lay-verify="required" autocomplete="off" class="layui-input" placeholder="请填写参数名称">';
        html += ' </div>';
        html += '</div>';
        html += ' <div class="layui-inline">';
        html += '<label class="layui-form-label">链接地址</label>';
        html += '<div class="layui-input-inline">';
        html += '<input type="text" name="purl[]" autocomplete="off" class="layui-input">';
        html += ' </div>';
        html += '</div>';
        html += ' <a href="javascript:;" class="layui-btn layui-btn-primary addInputReturn" style="margin-bottom: 5px;">+</a>';
        html += '</div>';

        $("#index-div").append(html);
    })
    /**
     * 删除事件
     */
    $("body").on('click','.delInput',function () {
        //获取当前点击的元素的父级的父级进行删除
        $(this).parent().remove();
    })
</script>
</body>

</html>